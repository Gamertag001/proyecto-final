{% extends './base.html' %}

{% block title %}Donar - AmicuSoft{% endblock %}

{% block mobile_menu %}
{% include 'includes/mobile_menu_donor.html' %}
{% endblock %}

{% block body %}
<div class="sidebar fade-in">
    <a href="#" class="sidebar-brand">AmicuSoft</a>
    
    <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
            <a href="{{ url_for('home') }}" class="sidebar-nav-link">
                <span>&#127968;</span>
                <span>Inicio</span>
            </a>
        </li>
        <li class="sidebar-nav-item">
            <a href="{{ url_for('listar_proyectos') }}" class="sidebar-nav-link">
                <span>&#128196;</span>
                <span>Proyectos</span>
            </a>
        </li>
        <li class="sidebar-nav-item" style="margin-top: auto; padding-top: 24px; border-top: 1px solid var(--border-color);">
            <a href="{{ url_for('logout') }}" class="sidebar-nav-link">
                <span>&#128682;</span>
                <span>Cerrar Sesion</span>
            </a>
        </li>
    </ul>
</div>

<div class="main-content">
    <div class="header-bar slide-up">
        <a href="{{ url_for('listar_proyectos') }}" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 8px;">
            <span>&#8592;</span> Volver a Proyectos
        </a>
    </div>
    
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
        <div class="alert-custom slide-up mt-4">
            <span>&#8505;</span>
            <span>{{ message }}</span>
        </div>
        {% endfor %}
    {% endif %}
    {% endwith %}
    
    <div class="row mt-4 justify-content-center">
        <div class="col-md-6">
            <div class="card-custom slide-up">
                <div style="text-align: center; margin-bottom: 32px;">
                    <div style="width: 80px; height: 80px; margin: 0 auto 16px; border-radius: 50%; background: linear-gradient(135deg, rgba(218, 24, 254, 0.2), rgba(153, 69, 255, 0.2)); display: flex; align-items: center; justify-content: center;">
                        <span style="font-size: 2.5rem;">&#128176;</span>
                    </div>
                    <h1 class="form-title">Realizar Donacion</h1>
                    <p class="form-subtitle">Apoya a: <strong>{{ proyecto.nombre }}</strong></p>
                </div>
                
                <form method="post" action="{{ url_for('formulario_donacion', id_proyecto=proyecto.id_proyecto) }}">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    
                    <div class="form-floating-custom">
                        <input type="number" id="monto" name="monto" min="1" step="0.01" placeholder=" " required>
                        <label for="monto">Monto a Donar ($)</label>
                    </div>
                    
                    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 24px;">
                        <button type="button" class="btn-outline-custom" style="flex: 1;" onclick="document.getElementById('monto').value='10'">$10</button>
                        <button type="button" class="btn-outline-custom" style="flex: 1;" onclick="document.getElementById('monto').value='25'">$25</button>
                        <button type="button" class="btn-outline-custom" style="flex: 1;" onclick="document.getElementById('monto').value='50'">$50</button>
                        <button type="button" class="btn-outline-custom" style="flex: 1;" onclick="document.getElementById('monto').value='100'">$100</button>
                    </div>
                    
                    <div class="card-custom" style="background: var(--bg-secondary); padding: 16px; margin-bottom: 24px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-secondary);">Proyecto</span>
                            <span style="font-weight: 600; color: var(--text-primary);">{{ proyecto.nombre }}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">Meta</span>
                            <span style="font-weight: 600; color: var(--text-primary);">${{ proyecto.monto_objetivo or 0 }}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                            <span style="color: var(--text-secondary);">Recaudado</span>
                            <span style="font-weight: 600; color: var(--text-primary);">${{ proyecto.monto_recaudado or 0 }}</span>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-primary-gradient w-100 py-3">
                        Confirmar Donacion
                    </button>
                    
                    <a href="{{ url_for('listar_proyectos') }}" class="btn-outline-custom w-100 py-3 mt-3 text-center" style="display: block;">
                        Cancelar
                    </a>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
