{% extends './base.html' %}

{% block title %}Crear Proyecto - AmicuSoft{% endblock %}

{% block mobile_menu %}
{% include 'includes/mobile_menu_coordinator.html' %}
{% endblock %}

{% block body %}
<div class="sidebar fade-in">
    <a href="#" class="sidebar-brand">AmicuSoft</a>
    
    <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
            <a href="{{ url_for('panel_coordinador') }}" class="sidebar-nav-link">
                <span>&#127968;</span>
                <span>Panel</span>
            </a>
        </li>
        <li class="sidebar-nav-item">
            <a href="{{ url_for('listar_proyectos') }}" class="sidebar-nav-link">
                <span>&#128196;</span>
                <span>Proyectos</span>
            </a>
        </li>
        <li class="sidebar-nav-item">
            <a href="{{ url_for('crear_proyecto') }}" class="sidebar-nav-link active">
                <span>&#10133;</span>
                <span>Crear Proyecto</span>
            </a>
        </li>
        <li class="sidebar-nav-item" style="margin-top: auto; padding-top: 24px; border-top: 1px solid var(--border-color);">
            <a href="{{ url_for('logout') }}" class="sidebar-nav-link">
                <span>&#128682;</span>
                <span>Cerrar Sesion</span>
            </a>
        </li>
    </ul>
</div>

<div class="main-content">
    <div class="header-bar slide-up">
        <a href="{{ url_for('panel_coordinador') }}" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 8px;">
            <span>&#8592;</span> Volver al Panel
        </a>
    </div>
    
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
        <div class="alert-custom slide-up mt-4">
            <span>&#8505;</span>
            <span>{{ message }}</span>
        </div>
        {% endfor %}
    {% endif %}
    {% endwith %}
    
    <div class="row mt-4 justify-content-center">
        <div class="col-md-8">
            <div class="card-custom slide-up">
                <div style="text-align: center; margin-bottom: 32px;">
                    <div style="width: 80px; height: 80px; margin: 0 auto 16px; border-radius: 50%; background: linear-gradient(135deg, rgba(218, 24, 254, 0.2), rgba(153, 69, 255, 0.2)); display: flex; align-items: center; justify-content: center;">
                        <span style="font-size: 2.5rem;">&#128196;</span>
                    </div>
                    <h1 class="form-title">{% if proyecto %}Editar Proyecto{% else %}Crear Nuevo Proyecto{% endif %}</h1>
                    <p class="form-subtitle">Completa la informacion del proyecto de recaudacion</p>
                </div>
                
                <form method="post">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    
                    <div class="form-floating-custom">
                        <input type="text" id="nombre" name="nombre" value="{{ proyecto.nombre if proyecto else '' }}" placeholder=" " required>
                        <label for="nombre">Nombre del Proyecto</label>
                    </div>
                    
                    <div class="form-floating-custom">
                        <textarea id="descripcion" name="descripcion" placeholder=" " style="width: 100%; min-height: 120px; padding: 16px 20px; border: 2px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-secondary); color: var(--text-primary); resize: vertical; font-family: inherit;">{{ proyecto.descripcion if proyecto else '' }}</textarea>
                    </div>
                    <label for="descripcion" style="display: block; margin-bottom: 20px; margin-top: -12px; font-size: 0.85rem; color: var(--text-muted);">Descripcion del proyecto</label>
                    
                    <div class="form-floating-custom">
                        <input type="number" id="monto_objetivo" name="monto_objetivo" value="{{ proyecto.meta if proyecto else '' }}" min="1" step="0.01" placeholder=" " required>
                        <label for="monto_objetivo">Meta de Recaudacion ($)</label>
                    </div>
                    
                    <div class="d-flex gap-3 mt-4 justify-content-end">
                        <a href="{{ url_for('panel_coordinador') }}" class="btn-outline-custom">
                            Cancelar
                        </a>
                        <button type="submit" class="btn-primary-gradient">
                            {% if proyecto %}Guardar Cambios{% else %}Crear Proyecto{% endif %}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
